<html ng-app="NtCuxiao">
<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1, maximum-scale=1.0, user-scalable=no"> 
    <meta content="telephone=no" name="format-detection" />  
    <script>
         if (document.documentElement.clientWidth > 1024) { 
           document.querySelector("meta[name=viewport]").setAttribute(
             'content', 
             'width=1024, initial-scale='+(document.documentElement.clientWidth/1024)+', minimum-scale=0.1, maximum-scale=2.0, user-scalable=no');
       }
    </script>
    <link href="assets/css/css.css?r=1849920396" media="screen" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/datatables.css">
    <link rel="stylesheet" href="assets/vendor/sm.min.css">
    <link href="assets/css/style.css"  media="screen" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/sm-nx.css">
    <script src="project.js"></script>
    <script>
       function browserRedirect() {
            var sUserAgent = navigator.userAgent.toLowerCase();
            var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
            var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
            var bIsMidp = sUserAgent.match(/midp/i) == "midp";
            var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
            var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
            var bIsAndroid = sUserAgent.match(/android/i) == "android";
            var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
            var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
            if (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) {
                // document.writeln("phone");
                console.log('ipad');
            } else {
                // document.writeln("pc");
                console.log('pc');
                var link = document.createElement('link');
                link.type = 'text/css';
                link.rel = 'stylesheet';
                link.href = 'assets/css/webSite.css';
                var head = document.getElementsByTagName('head')[0];
                head.append(link);
            }
        }

        browserRedirect();
    </script>
</head>

<body class="debugx">
<div id="bg"></div>
	<div id="container">
		<header>
				<span class="menu"></span>
        <a class="back_a" href=""><span class="menuBack"></span></a>
				<span tkey="other_form10"></span><span class="blue" tkey="form11_tittle"></span>
        <span class="menuRight" tkey="filter"></span>
		</header>

		<section class="filter hidden">
			<span tkey="date"></span>： <span class="startDate"></span>/<span class="endDate"></span> ；

		</section>


<div class="condition">

    <div class="row" >
    <ul class="col-50">

      <li>
        <div>
          <input type="date" data-toggle="date" class="datepicker" value="" name="start_at">
          <span class="datepicker-split">-</span>
          <input type="date" data-toggle="date" class="datepicker" value="" name="end_at">
        </div>
      </li>

      <!-- <li>
        <div class="item-content no-border item-button" style="margin-top: 40px">
          <button class="button button-fill button-primary" id="clear" tkey="clear">重置</button>
          <button class="button button-fill button-primary nx-btn-display" id="getList" data-table="#example" style="margin-left: 0px;" tkey="search"></button>
        </div>
      </li> -->
      </ul>
      <ul class="col-50" style="width:40%!important">
        <li class="col-100">
          <div class="item-content no-border item-button" style="margin-left: 100px">
            <!-- <button class="button button-fill button-primary" id="clear" tkey="clear">重置</button> -->
            <button class="button button-fill button-primary nx-btn-display" id="getList" data-table="#example" style="margin-left: 0px;" tkey="search"></button>
          </div>
        </li>
      </ul>
    </div>
  </div>
  <div class="data hidden">
    <table class="display nx-datatables" id="example" width="100%">
      <thead>
        <tr></tr>
      </thead>
    </table>

    <section class="count">
      <p class="blue label"><span tkey="heji"></span>|</p>
      <p class="footer"></p>
    </section>
    <!-- loading -->
    <div class="data_content">
      <div>
        <img src="assets/img/loading_b.gif" alt="">
      </div>
      <!-- <div class="loading"></div>
      
      <div class="loader loader--style1" title="0">
        <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
         width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">
        <path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946
          s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634
          c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"/>
        <path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0
          C22.32,8.481,24.301,9.057,26.013,10.047z">
          <animateTransform attributeType="xml"
            attributeName="transform"
            type="rotate"
            from="0 20 20"
            to="360 20 20"
            dur="0.5s"
            repeatCount="indefinite"/>
          </path>
        </svg>
        <p>加载中...</p>
      </div>   -->
    </div>
    <footer id="mainFooter">
      
    </footer>
  </div>
</div>







<!-- * 门店库存 -->
<!-- 汇总 -->
<div class="panel panel-right panel-cover" id='panel-reason'>
    <header>
    <a href="#" class="close-panel back"></a>  
    <span tkey="sum"></span>
    <a href="#" class="close-panel confirm confirm_1" tkey="sure"></a>
    </header>

    
    <!-- Click on link with "close-panel" class will close panel -->
    <div class="list-block">
      <p class="small" >* <span tkey="desc_sum"></span></p>
      <ul>
        <!-- Single chekbox item -->
        <li tkey="loading"></li>
      </ul>
      </div>
</div>
<!-- 店仓 -->
<div class="panel panel-right panel-cover" id='panel-store'>
    <header>
    <a href="#" class="close-panel back"></a>  
    <span tkey="store"></span> 
    <a href="#" class="close-panel confirm confirm_2" tkey="sure"></a>
    </header>

    
    <!-- Click on link with "close-panel" class will close panel -->
    <div class="list-block">
      <p class="small">* <span tkey="desc_store"></span></p>
      <p class="all">
        <span tkey="all_check"></span>
        <span class="checkbox">
          <span class="input-checkbox">
            <input type="checkbox" name="type" value="" class="checkedAll" data-label="" />
            <span class="inner"></span>
          </span>
          
        </span>
      </p>
      <ul>
        <!-- Single chekbox item -->
        <li tkey="loading"></li>
      </ul>
      </div>
</div>
<!-- 范围 -->
<div class="panel panel-right panel-cover" id='panel-range'>
    <header>
    <a href="#" class="close-panel back"></a>  
    <span tkey="range"></span>
    <a href="#" class="close-panel confirm confirm_3" tkey="sure"></a>
    </header>

    
    <!-- Click on link with "close-panel" class will close panel -->
    <div class="list-block">
      <p class="small" tkey="range_desc"></p>
      <ul>
        <!-- Single chekbox item -->
        <li>
          <label class="lb" for="range0">
          <span tkey="positive"></span>
          <span class="checkbox">
            <span class="input-checkbox ">
              <input type="checkbox" id="range0" name="range" value="positive" data-label="正"/>
              <span class="inner"></span>
            </span>
          </span>
          </label>
        </li>
        <li><label class="lb" for="range1">
          0
          <span class="checkbox">
            <span class="input-checkbox">
              <input type="checkbox" name="range" id="range1" value="zero" data-label="0" />
              <span class="inner"></span>
            </span>
            
          </span>
          </label>
        </li>
        <li>
          <label class="lb" for="range2">
          <span tkey="negative"></span> 
          <span class="checkbox">
            <span class="input-checkbox">
              <input type="checkbox" name="range" id="range2" value="negative" data-label="负" />
              <span class="inner"></span>
            </span>
          </span>
          </label>
        </li>
        <li>
          <span tkey="customize"></span>
          <span class="checkbox switch">
            <div class="item-input">
              <label class="label-switch">
                <input type="checkbox" value="自定义" data-label="自定义" name="customize">
                <div class="checkbox"></div>
              </label>
            </div>
          </span>
        </li>
        <div class="range">
          <input class="min_count" disabled type="number" name="min_count" /><span>-</span><input class="max_count" disabled type="number" name="max_count" />
        </div>
      </ul>
      </div>
</div>
<!-- 分类 -->
<div class="panel panel-right panel-cover" id='panel-category'>
    <header>
    <a href="#" class="close-panel back"></a>  
    <span tkey="category"></span>
    <a href="#" class="close-panel confirm confirm_4" tkey="sure"></a>
    </header> 

    
    <!-- Click on link with "close-panel" class will close panel -->
    <div class="list-block">
      <p class="small" tkey="category_desc"></p>
      <p class="all">
        <span tkey="all_check"></span>
        <span class="checkbox">
          <span class="input-checkbox checked">
            <input type="checkbox" name="type" value="" class="checkedAll" data-label="" checked />
            <span class="inner"></span>
          </span>
          
        </span>
      </p>
      <ul>
        <!-- Single chekbox item -->
        <li tkey="loading"></li>
      </ul>
      </div>
</div>


<div class="panel panel-right panel-cover" id='panel-type'>

    <header>
    <a href="#" class="close-panel back"></a>  
    对象
    <a href="#" class="close-panel confirm">确定</a>
    </header>

    
    <!-- Click on link with "close-panel" class will close panel -->
    <div class="list-block">
      <p class="small">* 请选择促销对象</p>
      <ul>
        <!-- Single chekbox item -->
        <li>
          单品
          <span class="checkbox">
            <span class="input-checkbox checked">
              <input type="checkbox" name="type" value="not_order" data-label="单品" checked />
              <span class="inner"></span>
            </span>
            
          </span>
        </li>
        <li>
          整单
          <span class="checkbox">
            <span class="input-checkbox checked">
              <input type="checkbox" name="type"  value="order" checked="" data-label="整单" checked />
              <span class="inner"></span>
            </span>
            
          </span>
        </li>
        <li>
          组合
          <span class="checkbox">
            <span class="input-checkbox checked">
              <input type="checkbox" name="type" value="combined" checked="" data-label="组合" checked />
              <span class="inner"></span>
            </span>
            
          </span>
        </li>
      </ul>
      </div>

</div>



    <script src="assets/vendor/jquery.min.js"></script>

    <script type="text/javascript">
        var jQuery=$.noConflict();
    </script>

    <script src="assets/vendor/fastclick.js"></script> 

    
    <script type="text/javascript" src="assets/vendor/zepto.js"></script>
    <script src="assets/vendor/sm.min.js"></script> 

    <script src="assets/js/common.js"></script>
    <script src="assets/js/api.config.js"></script>
    <!-- <script src="assets/js/host.js"></script> -->
    <script src="assets/vendor/datatables.js"></script>
    <script src="assets/vendor/Scroller-1.4.2/js/dataTables.scroller.min.js"></script>
    <script src="assets/vendor/FixedColumns-3.2.2/js/dataTables.fixedColumns.min.js"></script>
    <script src="assets/vendor/FixedHeader-3.1.2/js/dataTables.fixedHeader.min.js"></script>
    <script src="assets/js/lang.js"></script>
    <script type="text/javascript" src="assets/js/main.js"></script>
<script>
  $(function() {
    FastClick.attach(document.body);
  });
</script> 

<!-- 
<script src="assets/api/api.config.js"></script>
<script src="assets/api/api.js"></script> -->



<script>
var xhr;
var _ID = 0;
var _count ;//获取侧滑id
var _NUM = {'product':0,'gift':0};
var _time_interval = false;
var shop_id = getUrlParameter('shop_id') * 1;
var lang = getUrlParameter('lang');
var back_url='index.html'+ '?shop_id=' + shop_id + '&lang=' + lang; 
$('.back_a').attr('href',back_url);

//点击弹出右侧的panel    
$(document).on("click", ".btn-panel", function() {
    var id = $(this).attr('data-rel');
    $.openPanel("#"+id);
    $('#bg').show();
    _count = "#"+id;
    $('.panel.panel-right.panel-cover'+_count+' ').show();
});
$('.panel header .back').on("click",function(){
  $('#bg').hide();
})
$('#bg').on("click",function(){
  $('.panel.panel-right.panel-cover'+_count+' ').hide();
  $(this).hide();
})
$('.panel header .confirm').on("click",function(){
  $('#bg').hide();
})
// 点击背景可以直接回填值
$(document).on("close", ".panel", function(e, pageId, $page) {
  $(this).find('.close-panel').click();
});



// $('.relative-value').each(function(){
//     var s = $(this).attr('data-value');
//     var that = $(this);
//     $('input[name="'+s+'"]').change(function(){
//         var str = '';
//         $('input[name="'+s+'"]').each(function(){
//             if(!$(this).prop('checked')){
//                 return;
//             }
//             str += (str != '')? ',' + $(this).val() : $(this).val();
//         })
//         that.val(str);
//     })
// })
jQuery(document).ready(function($){

   // 通过url获取shop_id
  function getShopId(str){
      var url = location.href;
      var index = url.indexOf(str) + 8,//等于号后面一个字符开始检测
          fixed_index = url.indexOf(str) + 8,
          reg = /\d/,
          i = 0, //标记shop_id后面有几个数字, 这一串完整的数字是id
          id = 0;
      function getNums(index) {
          if(reg.test(url.substr(index, 1))){
              i++;
              getNums(++index);
          }
      }
      getNums(index);
      id = url.substr(fixed_index, i);
      return parseInt(id);
  }

	$('.filterButton').click(function(){
		$('.filter').addClass('hidden');
		$('#container > .condition').removeClass('hidden');
	})

  $('#getList').click(function(){
      $('.filter').removeClass('hidden');
      $('#container > .condition').addClass('hidden');
  })

  // 筛选
  var flag = true; 
  $('.menuRight').click(function(){
    if(flag){
      $('.filter').removeClass('hidden');
      $('#container > .condition').addClass('hidden');
      $('.data').removeClass('hidden');
      flag = false;
    }else{
      $('.filter').addClass('hidden');
      $('#container > .condition').removeClass('hidden');
      $('.data').addClass('hidden');
      flag = true;
    }
  })

  var date = new Date();
  var didDate = date.setDate(date.getDate()-6);
  var year = date.getFullYear();
  var month = date.getMonth()+1;
  var day = date.getDate();
  if(String(month).length == 1){
    month = '0' + month;
  }
  if(String(day).length == 1){
    day = '0' + day;
  }
  var year_month_day = year + '-' + month + '-' + day +'';
  if(sessionStorage.getItem('start11')){
    $('.startDate').text(sessionStorage.getItem('start11'));
    $('input[name=start_at]').val(sessionStorage.getItem('start11'))
  }else{
    $('input[name=start_at]').val(year_month_day);
    $('.startDate').text($('input[name=start_at]').val());
  }
  if(sessionStorage.getItem('end11')){
    $('.endDate').text(sessionStorage.getItem('end11'));
    $('input[name=end_at]').val(sessionStorage.getItem('end11'))
  }else{
    $('input[name=end_at]').val(new Date().Format("yyyy-MM-dd"));
    $('.endDate').text($('input[name=end_at]').val());
  }

  $('input[name=start_at]').change(function(){
    var start_at = $('input[name=start_at]').val();
    var end_at = $('input[name=end_at]').val();
    if(start_at > end_at ){
      $('input[name=start_at]').val($('input[name=end_at]').val())
    }
    $('.startDate').text($('input[name=start_at]').val()); 
    $('.endDate').text($('input[name=end_at]').val());
    sessionStorage.setItem('start11',$('input[name=start_at]').val());
  })
  $('input[name=end_at]').change(function(){
    var start_at = $('input[name=start_at]').val();
    var end_at = $('input[name=end_at]').val();
    if(start_at > end_at ){
      $('input[name=end_at]').val($('input[name=start_at]').val())
    }
    $('.startDate').text($('input[name=start_at]').val()); 
    $('.endDate').text($('input[name=end_at]').val());
    sessionStorage.setItem('end11',$('input[name=end_at]').val());
  })

  if(localStorage.form11_start_date != undefined){
    //startdate,enddate
    $('input[name=start_at]').val(localStorage.form11_start_date);
    $('input[name=end_at]').val(localStorage.form11_end_date);
  }

  $('.nx-btn-product-search').click(function(){
    var val = $.trim($('#productCode').val());
    var r = /^\d+$/;

    if(r.test(val) == true)  
     {  
        if(val.length < 6){
          showError('SKU至少输入6位');
          $('#productCode').focus();
          return false;
        }else{
          clearError();
        }
     }  
    else  
    {  
      if(val.length < 2){
        showError('商品名称至少输入2个字符');
        $('#productCode').focus();
        return false;
      }else{
        clearError();
      }
    }  
      tab2_click_callback();
    })
    
			var table_example;
      var TABLE = '';
      function reset(){
        if(!!table_example){
            table_example.destroy();
        }
        table_example='';
        $('.data table').remove();
        var t = TABLE.clone();
        $('.data').append(t);
      }
      TABLE = $('.data table').clone();

        var render_table_example1 = function(cols){
    
          var _columns = [];
          var _columns_sort = ['date','shop_code','stock_count','stock_amount','stock_date'];
          for(var i = 0; i < cols.length; i++){
            if($.inArray(cols[i], _columns_sort) >= 0){
              _columns.push(null);
            }else{
              _columns.push({orderable:false});
            }
          }

          var tbody_height = $(window).height() - $('header')[0].clientHeight - $('section.filter')[0].clientHeight - 48 - $('section.count')[0].clientHeight - $('footer#mainFooter')[0].clientHeight;
          table_example = $('#example').DataTable( {
              scrollX: '100%',
              scrollY: tbody_height,
              searching: false,
              sort:true,
              columns:null,
              order:[],

              "bProcessing" : true,  
              "bServerSide" : true,

              ajax:{
                url: API_URL_PREFIX+API_URL['payment_type'],
                type: 'POST',
                headers: {token:token},
                dataType : "json",
                contentType: "application/json",
                data: function(d){
                  // showLoadingToast();
                  d.limit = d.length;
                  d.offset = d.start;
                  d.current_page = 1 + d.start / d.limit;
                  d.shop_id = shop_id;
                  d.start_date = $('input[name=start_at]').val();
                  d.end_date = $('input[name=end_at]').val();
                  
                  if(d.order.length > 0){
                    var _order_by = $('.dataTables_scrollHead th:eq('+d.order[0].column+')').attr('data-code');
                    var _is_desc = (d.order[0].dir == 'asc')?0:1;

                    d.order_by= _order_by;
                    d.is_desc= _is_desc;
                  }

                  return (JSON.stringify(d));
                },
                dataSrc:  function(data){
                  // data = data.data;
                  // $('.data_content').hide();
                  // hideLoadingToast();
                  records = [];
                  if(data['records']){
                    for(var i = 0 ; i < data['records'].length ; i ++){
                      var _data = [];
                        for(var j=0; j < cols.length; j++){
                          _data.push(data['records'][i][cols[j]]);
                        }
                        records.push(_data);
                    }
                  }
                  window.scrollTo(0,0);
                  return records
                },
              },

              "initComplete": function(settings, json) {
                $('#mainFooter').html('');
  							$('#example_length').appendTo('#mainFooter');
  							$('#example_info').appendTo('#mainFooter');
  							$('#example_paginate').appendTo('#mainFooter');
                is_show_footer(records);
	            },
  						"lengthMenu": [ [10 , 20, 50, 80], ["10 / 页","20 / 页","50 / 页","80 / 页"] ],
							"language":   _LANG
          } );

          new $.fn.dataTable.FixedColumns( table_example, {
              leftColumns: 1
          } );

        }
        //click search
        $('.nx-btn-display').click(function(){
          $('.data_content').show();
          // showLoadingToast();
          flag = false;
          $('.data').removeClass('hidden');
          $('.allDate').html($('input[name=start_at]').val() +'至'+ $('input[name=end_at]').val() );
            if($(this).hasClass('disabled')){
                return;
            }
            $(this).addClass('disabled');
            $(this).html('加载中');
            reset();

            var reason_ids = [];
            var type = [];

            var data = {
              limit:10,
              current_page:1,
              shop_id:shop_id,
              start_date:$('input[name=start_at]').val(),
              end_date:$('input[name=end_at]').val(),
            };

            //条件放人缓存
            setConditionlocalstorage('form11',data);

            // 付款方式查销售
            if(xhr){
              xhr.abort();
            }  
            xhr = $.ajax({
              url: API_URL_PREFIX+API_URL['payment_type'],
              data: JSON.stringify(data),
              type: 'POST',
              dataType : "json",
              contentType: "application/json",
              success:  function(data){
                $('.data_content').hide();
                if(data.code != 0){
                  _error_handle(data);
                  return;
                }
                    
                data = data.data;
                var data_data = {
                    'sum_wechat':'wechat_amount',
                    'sum_cash':'cash_amount',
                    'sum_all_amount':'total_amount',
                    'record_count':'record_qty',
                    'page_count':'page_qty',
                    'sum_store_card':'store_card_amount',
                    'sum_card_online':'card_online_amount',
                    'sum_card_offline':'card_offline_amount',
                    'sum_alipay':'alipay_amount',
                    'sum_cash_ticket':'cash_ticket_amount',
                    'sum_integral':'integral_amount',
                    'sum_store_charge':'store_charge_amount',
                    'sum_company_card':'company_card_amount',
                    'sum_coupon':'coupon_amount'
                }
                for(var ss in data_data){
                    data[ss] = data[data_data[ss]];
                }
                
                records = [];
                if(data['records']){
                  for(var i = 0 ; i < data['records'].length ; i ++){
                    records.push([
                      data['records'][i]['sale_code'],
                      data['records'][i]['brand'],
                      data['records'][i]['sale_count'],
                      data['records'][i]['sale_amount'],
                      data['records'][i]['stock_count'], 
                      data['records'][i]['stock_amount']
                    ])
                  }
                }
                // var _data = {
                //     headers:[
                //     {title : data.table_headers.sale_code},
                //     {title : data.table_headers.brand},
                //     {title : data.table_headers.sale_count},
                //     {title : data.table_headers.sale_amount},
                //     {title : data.table_headers.stock_count},
                //     {title : data.table_headers.stock_amount}
                //     ],
                //     records:records
                // };
                var _data = {};
                var cols = [];
                var headers = [];
                var records = [];
                for(var i = 0 ; i < data.table_headers.length ;i++){

                    for(var ss in data.table_headers[i]){
                        headers.push({title : data.table_headers[i][ss]});
                        cols.push(ss);
                        if($('table thead tr').length == 1){
                          $('table thead tr').append('<th data-code="'+ss+'">'+data.table_headers[i][ss]+'</th>');
                        }

                    }
                }
                for(var i = 0 ; i < data.records.length; i++){
                    var tmp = [];
                    for(var j=0;j<cols.length;j++){
                        tmp[j] = data.records[i][cols[j]];
                    }
                    records.push(tmp);
                }
                // _data.records = records;
                // _data.headers = headers;
                render_table_example1(cols);
                // <span tkey="footer11_2"></span>
                // footer
                var footer = '';
                footer += '<span class="footerStyle"><span tkey="footer11_1"></span><span style="padding:0 5px">:</span>'+data.sum_cash+'</span>\
                <span class="footerStyle"><span tkey="footer11_2"></span><span style="padding:0 5px">:</span>'+data.sum_card_online+'</span>\
                <span class="footerStyle"><span tkey="footer11_3"></span><span style="padding:0 5px">:</span>'+data.sum_card_offline+'</span>\
                <span class="footerStyle"><span tkey="footer11_4"></span><span style="padding:0 5px">:</span>'+data.sum_alipay+'</span>\
                <span class="footerStyle"><span tkey="footer11_5"></span><span style="padding:0 5px">:</span>'+data.sum_wechat+'</span><br/>\
                <span class="footerStyle"><span tkey="footer11_8"></span><span style="padding:0 5px">:</span>'+data.sum_store_card+'</span>\
                <span class="footerStyle"><span tkey="footer11_9"></span><span style="padding:0 5px">:</span>'+data.sum_cash_ticket+'</span>\
                <span class="footerStyle"><span tkey="footer11_10"></span><span style="padding:0 5px">:</span>'+data.sum_integral+'</span>\
                <span class="footerStyle"><span tkey="footer11_11"></span><span style="padding:0 5px">:</span>'+data.sum_all_amount+'</span>\
                ' 
                $('.footer').html(footer);
                if (langs.indexOf(langCode) != -1){
                  $.getJSON('assets/lang/'+langCode+'.json', {},translate);
                }else{
                  $.getJSON('assets/lang/cn.json', translate);
                }
              },
              error:    function(data){
                console.log('error');
                _error_handle(data);
              },
              complete: function(){
                // hideLoadingToast();
                console.log('complete');
              },
              beforeSend : function(request){
                request.setRequestHeader("token", token);
              }
            })

            console.dir(data);

            $(this).removeClass('disabled');
            $(this).html('查询');
        })

})
















</script>

<script type="text/javascript">
  document.title = '付款方式查销售';
</script>
<script>
var _paq = _paq || [];

_paq.push(['enableLinkTracking', true]);
(function() {
    try {
        var SiteId = getUrlParameter('SiteId');
        var UserId = getUrlParameter('UserId') || '';
        var Appversion = getUrlParameter('Appversion');
        var Platform = getUrlParameter('Platform');
        var ShopName = getUrlParameter('ShopName');
        var TenantName = getUrlParameter('tenant_name');
        var TenantID = getUrlParameter('tenant_id');
        // 如果SiteId是false,则不发送Piwik数据
        if(SiteId == '' || SiteId == false){
            return
        }
        var u="//a.nexttao.com/";
        // 当url为空不发送
        if(u == "" || u == "false" || u == false){
            return
        }

        if(!!UserId){
            _paq.push(['setUserId', UserId]);
        }
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', SiteId]);
        _paq.push(['setDocumentTitle', '促销规则查询']);

        _paq.push(['setCustomVariable',"5","AppVersion",P_CV.AppVersion,'page']);

        // _paq.push(['setCustomVariable',"1","App version",Appversion]);
        // _paq.push(['setCustomVariable',"2","Platform",Platform]);
        // _paq.push(['setCustomVariable',"3","ShopName",ShopName]);
        // _paq.push(['setCustomVariable',"4","TenantID",TenantName]);
        // _paq.push(['setCustomVariable',"5", "TenantName", TenantName]);
        _paq.push(['trackPageView']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
    }catch (e){
        console.log(e);
    }
})();
</script>

</body>
</html>