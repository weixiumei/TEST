<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>iScroll5</title>

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/iscroll-probe.js"></script>

<script src="assets/js/jquery.min.js"></script> 
<!-- <script src="assets/js/iscroll.js"></script> -->
<script src="assets/js/iscroll-probe.js"></script>
<script type="text/javascript" src="assets/js/iscroll-probe.js"></script>
<script src="assets/js/echarts.min.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/angular-1.4.8.min.js"></script>
<script src="assets/js/angular-resource.js"></script>
<script src="assets/js/angular-route.js"></script>

<!-- <script type="text/javascript" src="assets/js/ng-iscroll.js"></script> -->
<script type="text/javascript" src="assets/js/angular-iscroll.js"></script>
<script type="text/javascript" src="assets/api/app-5.js"></script>

<script type="text/javascript">
    
	// var myScroll,
	//     pullDownEl, pullDownOffset,
	//     pullUpEl, pullUpOffset,
	//     generatedCount = 0,_maxScrollY;

	// /**
	//  * 下拉刷新 （自定义实现此方法）
	//  * myScroll.refresh(); 数据加载完成后，调用界面更新方法
	//  */
	// function pullDownAction () {
 //        console.log('pullDownAction');
	//     setTimeout(function () {    // <-- Simulate network congestion, remove setTimeout from production!
	//         var el, li, i;
	//         el = document.getElementById('thelist');

	//         for (i=0; i<3; i++) {
	//             li = document.createElement('li');
	//             li.innerText = 'Generated row ' + (++generatedCount);
	//             el.insertBefore(li, el.childNodes[0]);
	//         }
	        
	//         myScroll.refresh();        //数据加载完成后，调用界面更新方法// Remember to refresh when contents are loaded (ie: on ajax completion)
	//     }, 1000);    // <-- Simulate network congestion, remove setTimeout from production!
	// }

 //    function loaded () {
 //        $('#scroller').height($('#wrapper').height() + 1);
 //        console.log(document.documentElement.clientHeight);
 //        pullDownEl = document.querySelector('#pullDown');
 //        if (pullDownEl) {
 //            pullDownOffset = pullDownEl.offsetHeight;
 //        } else {
 //            pullDownOffset = 0;
 //        }
 //        //初始化时
 //        myScroll = new IScroll('#wrapper', {
 //            //开启鼠标滚轮支持和滚动条支持
 //            probeType:1,//执行scroll
 //            startY:-pullDownOffset
 //        });
 //        console.log('maxScrollY-1:'+myScroll.maxScrollY);
 //        _maxScrollY = myScroll.maxScrollY = myScroll.maxScrollY + pullUpOffset;
 //        console.log('maxScrollY-2:'+myScroll.maxScrollY);
        
 //        var isScrolling = false;

 //        //Event: scroll start
 //        myScroll.on("scrollStart", function() {
 //            if(this.y==this.startY){
 //                isScrolling = true;
 //            }
 //            console.log('scrollStart->'+'start-y:'+this.y);
 //        });
            
 //        //Event: scroll
 //        myScroll.on('scroll', function(){
 //            if (this.y >= 5 && pullDownEl && !pullDownEl.className.match('flip')) {
 //                pullDownEl.className = 'flip';
 //                pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Release to refresh';
 //                //this.minScrollY = 0;
 //            } else if (this.y < 5  && pullDownEl && pullDownEl.className.match('flip')) {
 //                pullDownEl.className = '';
 //                pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Pull down to refresh';
 //            }
 //        });
            
 //        //Event: scrollEnd
 //        myScroll.on("scrollEnd",function(){
 //            console.log('scrollEnd -- directionY:'+this.directionY + '   y1:'+this.y + '   maxScrollY-3:'+this.maxScrollY);
 //            if (pullDownEl && !pullDownEl.className.match('flip') && this.y > this.options.startY) {
 //                console.log('resume'); 
 //                this.scrollTo(0, this.options.startY,800);
 //              }
 //            else if (pullDownEl && pullDownEl.className.match('flip')){
 //                    pullDownEl.className = 'loading';
 //                    pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Loading...';                
 //                    // Execute custom function (ajax call?)
 //                    if (isScrolling) {
 //                        console.log('before pull down action:'+this.y); 
 //                        pullDownAction();
 //                        console.log('after pull down action:'+this.y); 
 //                      }
 //            }
 //            isScrolling = false;
 //        });

 //        //Event: refresh
 //        myScroll.on("refresh", function() {
 //            console.log('maxScrollY-4:'+this.maxScrollY);
 //            _maxScrollY = this.maxScrollY = this.maxScrollY+pullUpOffset;
 //            console.log('maxScrollY-5:'+this.maxScrollY);
            
 //            if (pullDownEl  && pullDownEl.className.match('loading')) {
 //                   pullDownEl.className = '';
 //                   pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Pull down to refresh';
 //                   this.scrollTo(0,this.options.startY,0);
 //            }
            
 //            console.log('refresh finished!'); 
 //        });
        // setTimeout(function () { document.getElementById('wrapper').style.left = '0'; }, 500);
 //    }
	// document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
</script>
<script>
   document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
   //  var app = angular.module("app",[]);
   //  app.controller("test",["$scope","getDatas",function($scope,getDatas){
   //      $scope.loaded = true;
   //  }]).factory("getDatas",["$timeout","$q",function($timeout,$q){
   //      return {
   //          get : function(){
   //              var defer = $q.defer();
   //              var dataArray = [];
   //              $timeout(function(){
   //                  for(var i=0 ; i<50; i++){
   //                      dataArray.push({
   //                          name : "http://www.raowensheng.com/"
   //                      });
   //                  }
   //                  defer.resolve(dataArray);
   //              },2000);
   //              return defer.promise;
   //          }
   //      }
   //  }]);
   //  app.directive("scroll",["getDatas","$timeout",function(getDatas,$timeout){
   //      return {
   //          restrice : "E",
   //          link : function($scope,element,attrs){
   //              getDatas.get().then(function(data){
   //                  $scope.datas = data;
   //                  $timeout(function(){
   //                      new IScroll(element[0],{probeType:1,preventDefault:false});
   //                  });
   //                  $scope.loaded = false;
   //              });

   //          }
   //      }
   //  }]);
</script>

<style type="text/css" media="all">
body,ul,li {
    padding:0;
    margin:0;
    border:0;
}

body {
    font-size:12px;
    -webkit-user-select:none;
    -webkit-text-size-adjust:none;
    font-family:helvetica;
}

#header {
    position:absolute; z-index:2;
    top:0; left:0;
    width:100%;
    height:40px;
    line-height:45px;
    background-color:#d51875;
    background-image:-webkit-gradient(linear, 0 0, 0 100%, color-stop(0, #fe96c9), color-stop(0.05, #d51875), color-stop(1, #7b0a2e));
    background-image:-moz-linear-gradient(top, #fe96c9, #d51875 5%, #7b0a2e);
    background-image:-o-linear-gradient(top, #fe96c9, #d51875 5%, #7b0a2e);
    padding:0;
    color:#eee;
    font-size:20px;
    text-align:center;
}

#header a {
    color:#f3f3f3;
    text-decoration:none;
    font-weight:bold;
    text-shadow:0 -1px 0 rgba(0,0,0,0.5);
}

#footer {
    position:absolute; z-index:2;
    bottom:0; left:0;
    width:100%;
    height:48px;
    background-color:#222;
    background-image:-webkit-gradient(linear, 0 0, 0 100%, color-stop(0, #999), color-stop(0.02, #666), color-stop(1, #222));
    background-image:-moz-linear-gradient(top, #999, #666 2%, #222);
    background-image:-o-linear-gradient(top, #999, #666 2%, #222);
    padding:0;
    border-top:1px solid #444;
}

#wrapper {
    position:absolute; z-index:1;
    top:45px; bottom:48px; left:-9999px;
    width:100%;
    background:#aaa;
    overflow:auto;
}

#scroller {
    position:absolute; z-index:1;
/*    -webkit-touch-callout:none;*/
    -webkit-tap-highlight-color:rgba(0,0,0,0);
    width:100%;
    padding:0;
}

#scroller ul {
    list-style:none;
    padding:0;
    margin:0;
    /*height: 900px;*/
    width:100%;
    text-align:left;
    /*background-image: url(assets/img/plum.png);*/
    /*overflow: auto;*/
}

#scroller li {
    padding:0 10px;
    height:40px;
    line-height:40px;
    border-bottom:1px solid #ccc;
    border-top:1px solid #fff;
    background-color:#fafafa;
    font-size:14px;
}

#myFrame {
    position:absolute;
    top:0; left:0;
}
/**
 *
 * Pull down styles
 *
 */
#pullDown, #pullUp {
    background:#fff;
    height:40px;
    line-height:40px;
    padding:5px 10px;
    border-bottom:1px solid #ccc;
    font-weight:bold;
    font-size:14px;
    color:#888;
    /*position: absolute;*/
}
#pullDown .pullDownIcon, #pullUp .pullUpIcon  {
    display:block; float:left;
    width:40px; height:40px;
    background:url(assets/img/loading2.png) 0 0 no-repeat;
    -webkit-background-size:40px 40px; background-size:40px 40px;
    -webkit-transition-property:-webkit-transform;
    -webkit-transition-duration:250ms;    
}
#pullDown .pullDownIcon {
    -webkit-transform:rotate(0deg) translateZ(0);
}
#pullUp .pullUpIcon  {
    -webkit-transform:rotate(-180deg) translateZ(0);
}

#pullDown.flip .pullDownIcon {
    -webkit-transform:rotate(-180deg) translateZ(0);
}

#pullUp.flip .pullUpIcon {
    -webkit-transform:rotate(0deg) translateZ(0);
}

#pullDown.loading .pullDownIcon, #pullUp.loading .pullUpIcon {
    background-position:0 100%;
    -webkit-transform:rotate(0deg) translateZ(0);
    -webkit-transition-duration:0ms;

    -webkit-animation-name:loading;
    -webkit-animation-duration:2s;
    -webkit-animation-iteration-count:infinite;
    -webkit-animation-timing-function:linear;
}

@-webkit-keyframes loading {
    from { -webkit-transform:rotate(0deg) translateZ(0); }
    to { -webkit-transform:rotate(360deg) translateZ(0); }
}
.search{
    margin: 5px 10px 5px 5px;
    border: 1px solid #ccc;
    width: 80%;
    height: 20px;
}
</style>
</head>
<body>
    <!-- <div ng-app='App'>
        <div ng-controller='Controller'>
          <div id="header"><a href="http://cubiq.org/iscroll">iScroller Test</a></div>
          <div id="wrapper" ng-scroll style="overflow: hidden; left: 0px;">
            <div id="scroller">
              <div id="pullDown" class="">
                <span class="pullDownIcon"></span><span class="pullDownLabel">Pull down to refresh...</span>
              </div>
              <ul id="thelist">
                <li>Pretty row 1</li>
                <li id="aaa">Pretty row 2</li>
                <li>Pretty row 3</li>
                <li>Pretty row 4</li>
                <li>Pretty row 5</li>
                <li>Pretty row 6</li>
                <li>Pretty row 7</li>
                <li>Pretty row 8</li>
                <li>Pretty row 9</li>
                <li>Pretty row 10</li>
              </ul>
            </div>
          </div>
          <div id="footer"></div>
        </div>
    </div> -->
    <div ng-app='App'>
        <div ng-controller='Controller'>
            <div id="header"><a href="http://cubiq.org/iscroll">iScroll</a></div>
            <div id="wrapper" ng-scroll style="overflow: hidden; left: 0px;">
                <div id="scroller" style="transform-origin: 0px 0px 0px; transition-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1); position: absolute; top: -51px; left: 0px; transition-duration: 0ms;">
                    <div id="pullDown" class="">
                        <span class="pullDownIcon"></span><span class="pullDownLabel">Pull down to refresh...</span>
                    </div>
                    <ul id="thelist">
                        <li>Pretty row 1</li>
                        <li>Pretty row 2</li>
                        <li>Pretty row 3</li>
                        <li>Pretty row 4</li>
                        <li>Pretty row 5</li>
                        <li>Pretty row 6</li>
                        <li>Pretty row 7</li>
                        <li>Pretty row 8</li>
                        <li>Pretty row 9</li>
                        <li>Pretty row 10</li>
                    </ul>
                </div>
            </div>
            <div id="footer"></div>
        </div>
    </div>
</body>
</html>