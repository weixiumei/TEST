<!--  head：页面的</head>之前代码 -->
<#include 'inc.head.html'>
<body ng-controller="getTable">
    <div class="div_class" ng-style="{height:div_class_height.height}">
        <!-- <div> -->
            <!-- 店铺选择：<select 
                class="select_ele" 
                ng-model="search_data.shop_code" 
                ng-options="m.shop_code as m.shop_name for m in shop_list">
            </select> -->
        <!-- </div> -->
        <div class="condition">
            <p>RFM分析
                <img class="rfm_help_img" ng-show="!rfm_help_show" ng-mouseover="rfm_help_show=true" src="assets/images/help_off.png">
                <img class="rfm_help_img" ng-show="rfm_help_show" ng-mouseleave="rfm_help_show=false" src="assets/images/help_on.png">
                <div class="help_div rfm_help_div" ng-class="{hidden:!rfm_help_show}">
                    <div>R：会员最近一次的消费时间</div>
                    <div>F：在最近一段时间内，会员的消费次数</div>
                    <div>M：在最近一段时间内，购买的会员数、总金额、平均金额。</div>
                </div>
            </p>
            <label ng-repeat="val in shop_list track by $index">
                <input 
                    type="radio" 
                    ng-value="val.shop_code" 
                    ng-model="search_data.shop_code">
                    {{val.shop_name}}
            </label>
            <input type="text" placeHolder="指定店仓(编号)" ng-disabled="search_data.shop_code=='all'" ng-model="shop_code_input" class="shop_code_input"/>
            
            <label>截止到
                 <input 
                    type="date" 
                    ng-model="end_date"/>
            </label>

            <label>之前 
                <select 
                    class="select_ele" 
                    ng-model="search_data.days" 
                    ng-options="m.id as m.name for m in year_day_list">
                    <!-- <option ng-value="m.name"></option> -->
                </select>
            </label>
            
            <label>统计 
                <select 
                    class="select_ele" 
                    ng-model="search_data.value_type" 
                    ng-options="m.id as m.name for m in type_list">
                </select>
            </label>
            <button ng-click="search()" ng-disabled="button_disable_class=='button_disable'" ng-class="button_disable_class">{{button_disable_class=='button_disable'?'搜索...':'搜索'}}</button>
            <!-- <label ng-repeat="val in type_list track by $index">
                <input 
                    type="radio" 
                    ng-value="val.id" 
                    ng-model="search_data.value_type" 
                    ng-change="search()">
                    {{val.name}}
            </label> -->
        </div>
        <div class="table_div">
            <table cellspacing="0">
                <tr class="color_head">
                    <th>{{list.header.name}}</th>
                    <th ng-repeat="item in list.header.value">{{item}}</th>
                </tr>
                <tr ng-repeat="tr_item in list.body" ng-init="outerIndex = $index">
                    <td class="color_head">{{tr_item.name}}</td>
                    <td ng-repeat="td_item in tr_item.value track by $index" ng-init="innerIndex = $index" ng-class="{'max':td_item.max==td_item.num && td_item.max!=0 && outerIndex != tr_item.value.length}">
                        <p class="number">{{td_item.num}}{{list.uom_name}}</p>
                        <p class="rate">{{td_item.rate}}%</p>
                    </td>
                </tr>
            </table>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
    <!-- script：引入 js 文件 -->
    <#include 'inc.script.html'>

    <script type="text/javascript">
    	// piwik
        // document.title = '首页';
    </script>

<!-- bottom：加载loading和piwik -->
<#include 'inc.bottom.html'>
