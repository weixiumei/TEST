<html>
  <head>
    <title>闭包</title>
  </head>
  <script>

    // // reduce求和
    // var numbers = [65, 44, 12, 4];
    // function getSum(total, num) {
    //   // console.log(total+'  '+num)
    //   return total + num;
    // }
    // var result = numbers.reduce(getSum)
    // console.log('reduce求和: '+result)

    // // 闭包求和
    // function lazy_sum(arr){
    //   var in_num = 10
    //   var sum = function () {
    //     return arr.reduce(function(x, y){
    //       return x + y
    //     }) + in_num
    //   }
    //   return sum;
    // }
    // var f = lazy_sum([1,2,3,4,5])
    // var sum = f()
    // console.log('闭包求和：'+sum)


    // // 闭包 内部变量
    // function create_counter(initial) {
    //   var x = initial || 0;
    //   return {
    //     inc: function () {
    //       x += 1;
    //       return x;
    //     }
    //   }
    // }
    // var c1 = create_counter();
    // c1.inc(); // 1
    // c1.inc(); // 2
    // c1.inc(); // 3
    // console.log(c1.inc()+' '+c1.inc()+' '+c1.inc())

    // var c2 = create_counter(10);
    // c2.inc(); // 11
    // c2.inc(); // 12
    // c2.inc(); // 13
    // console.log(c2.inc()+' '+c2.inc()+' '+c2.inc())


    function fun(n, o){
      console.log(o)
      return {
        fun: function(m){
          return fun(m, n)
        }
      }
    }
    var a = fun(0) // undefind
    a.fun(1) // 0
    a.fun(2) // 0
    a.fun(3) // 0

    var b = fun(0).fun(1).fun(2).fun(3) 
    // undefind : o=0
    // 0
    // 1
    // 2

    var c = fun(0).fun(1)
    c.fun(2)
    c.fun(3)
    // undefined （n=0, o=undefind）
    // 0: fun(1): (m=1, n=0==> n=1, o=0)
    // 1: fun(2): (m=2, n=1==> n=2, o=1)
    // 1: fun(3): (m=3, n=1==> n=3, o=1)

  </script>
  <body>
    <div></div>
  </body>
</html>